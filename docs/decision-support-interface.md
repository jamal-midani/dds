# واجهة دعم اتخاذ القرار - أفضل المتقدمين حسب Gemini AI

## موقع الواجهة

### المسار (URL)
```
http://localhost:8000/admin/applicants/decision-support
```

### كيفية الوصول
1. تسجيل الدخول إلى لوحة التحكم: `http://localhost:8000/admin`
2. من القائمة الجانبية، اضغط على **"دعم اتخاذ القرار"** (أو "Decision Support")
3. أو اذهب مباشرة إلى: `/admin/applicants/decision-support`

## الملفات المرتبطة

### 1. Controller/Page Class
**الملف**: `app/Filament/Resources/ApplicantResource/Pages/DecisionSupport.php`

**الوظائف**:
- `getApplicants()`: جلب جميع المتقدمين لمنصب معين
- `getTopRecommendations()`: جلب أفضل 3 متقدمين باستخدام Gemini AI

### 2. View Template
**الملف**: `resources/views/filament/resources/applicant-resource/pages/decision-support.blade.php`

**المكونات**:
- نموذج اختيار المنصب
- عرض أفضل 3 متقدمين (Gemini AI)
- عرض جميع المتقدمين

### 3. Service Layer
**الملف**: `app/Services/GeminiService.php`

**الوظيفة**: `getTopRecommendations()` - تحليل المتقدمين وإرجاع أفضل 3

## كيفية الاستخدام

### الخطوة 1: اختيار المنصب
- من القائمة المنسدلة، اختر المنصب المطلوب
- سيتم تحميل المتقدمين تلقائياً

### الخطوة 2: اختيار معيار الترتيب (اختياري)
- **النقاط**: ترتيب حسب النقاط التلقائية
- **الخبرة**: ترتيب حسب سنوات الخبرة
- **المؤهل العلمي**: ترتيب حسب المؤهل
- **العمر**: ترتيب حسب العمر
- **التقييم**: ترتيب حسب تقييم المسؤول

### الخطوة 3: عرض النتائج
- **أفضل 3 متقدمين (Gemini AI)**: في العمود الأيسر
  - يتم تحليل جميع المتقدمين باستخدام Gemini AI
  - يتم عرض أفضل 3 متقدمين بناءً على التحليل الذكي
  - المتقدم الأول يتم تمييزه بخلفية خضراء
  
- **جميع المتقدمين**: في العمود الأيمن
  - قائمة بجميع المتقدمين للمنصب المحدد
  - مرتبة حسب المعيار المختار

## المميزات

### 1. تحليل Gemini AI
- يحلل جميع المتقدمين للمنصب المحدد
- يأخذ في الاعتبار:
  - المؤهل العلمي
  - الخبرات السابقة
  - المهارات
  - النقاط التلقائية
  - العمر
- يعطي توصيات ذكية لأفضل 3 متقدمين

### 2. الترتيب المرن
- يمكن ترتيب المتقدمين حسب معايير مختلفة
- ترتيب تصاعدي أو تنازلي

### 3. عرض تفصيلي
- عرض النقاط التلقائية
- عرض المؤهل العلمي
- عرض العمر
- عرض التقييم (إن وجد)

## ملاحظات

- **Gemini API**: يتطلب مفتاح API في `.env`:
  ```env
  GEMINI_API_KEY=your_api_key_here
  ```
  
- **Fallback**: إذا فشل Gemini AI، يتم عرض أفضل 3 متقدمين حسب النقاط

- **الأداء**: قد يستغرق تحليل Gemini AI بضع ثوانٍ حسب عدد المتقدمين

## استكشاف الأخطاء

### لا تظهر التوصيات
1. تأكد من وجود `GEMINI_API_KEY` في `.env`
2. تأكد من وجود متقدمين للمنصب المحدد
3. تحقق من سجلات الأخطاء في `storage/logs/laravel.log`

### لا يظهر أي متقدمين
1. تأكد من اختيار منصب
2. تأكد من وجود متقدمين لهذا المنصب
3. تحقق من قاعدة البيانات

